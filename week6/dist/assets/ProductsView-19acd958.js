import{_ as b,o as n,c as o,a as t,e as u,n as h,F as f,f as v,t as d,r as p,b as g,g as P,h as $,w,d as m,i as x}from"./index-f5d8b808.js";const C={props:["has_pre","total_pages","current_page","has_next"],emits:["switchPage"],methods:{switchPage(l){l!==this.current_page&&this.$emit("switchPage",l)}}},y={class:"pagination"},V=t("span",{"aria-hidden":"true"},"«",-1),D=[V],L=["onClick"],N=t("span",{"aria-hidden":"true"},"»",-1),A=[N];function z(l,s,e,k,c,r){return n(),o("ul",y,[t("li",{class:h(["page-item",{disabled:!e.has_pre}])},[t("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:s[0]||(s[0]=u(i=>r.switchPage(e.current_page-1),["prevent"]))},D)],2),(n(!0),o(f,null,v(e.total_pages,i=>(n(),o("li",{key:i,class:h(["page-item",{active:i===e.current_page}])},[t("a",{class:"page-link",href:"#",onClick:u(_=>r.switchPage(i),["prevent"])},d(i),9,L)],2))),128)),t("li",{class:h(["page-item",{disabled:!e.has_next}])},[t("a",{class:"page-link",href:"#","aria-label":"Next",onClick:s[1]||(s[1]=u(i=>r.switchPage(e.current_page+1),["prevent"]))},A)],2)])}const B=b(C,[["render",z]]),R={components:{VPagi:B},data(){return{products:[],pagination:{},isActive:"",isDisabled:!1}},methods:{updateCart(){this.isActive=item.id,this.isDisabled=!0,setTimeout(()=>{this.isActive="",this.isDisabled=!1},1e3)},getProducts(){let l=this.$loading.show({container:this.$refs.productsLoading});const s="https://vue3-course-api.hexschool.io/v2/api/practice_chien/products";this.$http.get(s).then(e=>{this.products=e.data.products,this.pagination=e.data.pagination}).catch(e=>{alert(`${e.response.data.message}，錯誤代碼：${e.response.status}`)}).finally(()=>{l.hide()})}},mounted(){this.getProducts()}},F={ref:"productsLoading",class:"vl-parent container pt-5"},T={class:"table align-middle mb-5"},j=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),E={style:{width:"200px"}},M={style:{height:"100px","background-size":"cover","background-position":"center"}},S=["src","alt"],U={class:"h6"},q={class:"h5"},G={class:"btn-group btn-group-sm"},H=["disabled"],I={key:0,class:"fas fa-spinner fa-pulse"};function J(l,s,e,k,c,r){const i=p("RouterLink"),_=p("VPagi");return n(),o("div",F,[t("main",null,[t("table",T,[j,t("tbody",null,[(n(!0),o(f,null,v(c.products,a=>(n(),o("tr",{key:a.id},[t("td",E,[t("div",M,[t("img",{src:a.imageUrl,alt:a.title,class:"object-fit-cover"},null,8,S)])]),t("td",null,d(a.title),1),t("td",null,[t("del",U,"原價 "+d(a.origin_price)+" 元",1),t("div",q,"現在只要 "+d(a.price)+" 元",1)]),t("td",null,[t("div",G,[g(i,{to:`/product/${a.id}`,class:"btn btn-outline-secondary"},{default:w(()=>[m(" 查看更多 ")]),_:2},1032,["to"]),t("button",{type:"button",class:"btn btn-outline-danger",onClick:s[0]||(s[0]=K=>r.updateCart()),disabled:c.isDisabled},[m(" 加到購物車 "),c.isActive===a.id?(n(),o("i",I)):x("",!0)],8,H)])])]))),128))])])]),g(_,P($(c.pagination)),null,16)],512)}const Q=b(R,[["render",J]]);export{Q as default};
