import{_ as b,o,c,a as t,e as u,n as h,F as f,f as v,t as d,r as p,b as g,g as P,h as $,w,d as m,i as x}from"./index-4c51cdca.js";const C={props:["has_pre","total_pages","current_page","has_next"],emits:["switchPage"],methods:{switchPage(i){i!==this.current_page&&this.$emit("switchPage",i)}}},y={class:"pagination"},V=t("span",{"aria-hidden":"true"},"«",-1),D=[V],L=["onClick"],N=t("span",{"aria-hidden":"true"},"»",-1),A=[N];function z(i,n,e,k,l,r){return o(),c("ul",y,[t("li",{class:h(["page-item",{disabled:!e.has_pre}])},[t("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:n[0]||(n[0]=u(a=>r.switchPage(e.current_page-1),["prevent"]))},D)],2),(o(!0),c(f,null,v(e.total_pages,a=>(o(),c("li",{key:a,class:h(["page-item",{active:a===e.current_page}])},[t("a",{class:"page-link",href:"#",onClick:u(_=>r.switchPage(a),["prevent"])},d(a),9,L)],2))),128)),t("li",{class:h(["page-item",{disabled:!e.has_next}])},[t("a",{class:"page-link",href:"#","aria-label":"Next",onClick:n[1]||(n[1]=u(a=>r.switchPage(e.current_page+1),["prevent"]))},A)],2)])}const B=b(C,[["render",z]]),R={components:{VPagi:B},data(){return{products:[],pagination:{},isActive:"",isDisabled:!1}},methods:{updateCart(i){this.isActive=i.id,this.isDisabled=!0,setTimeout(()=>{this.isActive="",this.isDisabled=!1},1e3)},getProducts(){let i=this.$loading.show({container:this.$refs.productsLoading});const n="https://vue3-course-api.hexschool.io/v2/api/practice_chien/products";this.$http.get(n).then(e=>{this.products=e.data.products,this.pagination=e.data.pagination}).catch(e=>{alert(`${e.response.data.message}，錯誤代碼：${e.response.status}`)}).finally(()=>{i.hide()})}},mounted(){this.getProducts()}},F={ref:"productsLoading",class:"vl-parent container pt-5"},T={class:"table align-middle mb-5"},j=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),E={style:{width:"200px"}},M={style:{height:"100px","background-size":"cover","background-position":"center"}},S=["src","alt"],U={class:"h6"},q={class:"h5"},G={class:"btn-group btn-group-sm"},H=["onClick","disabled"],I={key:0,class:"fas fa-spinner fa-pulse"};function J(i,n,e,k,l,r){const a=p("RouterLink"),_=p("VPagi");return o(),c("div",F,[t("main",null,[t("table",T,[j,t("tbody",null,[(o(!0),c(f,null,v(l.products,s=>(o(),c("tr",{key:s.id},[t("td",E,[t("div",M,[t("img",{src:s.imageUrl,alt:s.title,class:"object-fit-cover"},null,8,S)])]),t("td",null,d(s.title),1),t("td",null,[t("del",U,"原價 "+d(s.origin_price)+" 元",1),t("div",q,"現在只要 "+d(s.price)+" 元",1)]),t("td",null,[t("div",G,[g(a,{to:`/product/${s.id}`,class:"btn btn-outline-secondary"},{default:w(()=>[m(" 查看更多 ")]),_:2},1032,["to"]),t("button",{type:"button",class:"btn btn-outline-danger",onClick:K=>r.updateCart(s),disabled:l.isDisabled},[m(" 加到購物車 "),l.isActive===s.id?(o(),c("i",I)):x("",!0)],8,H)])])]))),128))])])]),g(_,P($(l.pagination)),null,16)],512)}const Q=b(R,[["render",J]]);export{Q as default};
